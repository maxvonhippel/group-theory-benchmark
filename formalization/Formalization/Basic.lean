/-
Kourovka Notebook Problem 19.73 (P.-E. Caprace and N. Monod)

Is there a compactly generated, locally compact group that is topologically simple,
but not abstractly simple?

This formalization defines the relevant concepts and states the problem as an existential statement.
-/

import Mathlib.Topology.Algebra.Group.Basic
import Mathlib.Topology.Compactness.LocallyCompact
import Mathlib.GroupTheory.Subgroup.Simple
import Mathlib.Topology.Algebra.Group.ClosedSubgroup

open Topology Set

variable (G : Type*) [Group G] [TopologicalSpace G]

/--
A topological group is **compactly generated** if there exists a compact subset
that generates the group (i.e., the subgroup generated by this compact set is the whole group).
-/
def IsCompactlyGenerated : Prop :=
  ∃ K : Set G, IsCompact K ∧ Subgroup.closure K = ⊤

/--
A topological group is **topologically simple** if it is nontrivial and
has no proper closed normal subgroups.

Equivalently: every closed normal subgroup is either trivial or the whole group.
-/
def IsTopologicallySimple [IsTopologicalGroup G] : Prop :=
  Nontrivial G ∧ ∀ H : Subgroup G, H.Normal → IsClosed (H : Set G) → H = ⊥ ∨ H = ⊤

/--
**Kourovka Notebook Problem 19.73** (P.-E. Caprace and N. Monod):

Is there a compactly generated, locally compact group that is topologically simple,
but not abstractly simple?

The question asks whether there exists a topological group G such that:
1. G is locally compact
2. G is compactly generated (generated by a compact subset)
3. G is topologically simple (no proper closed normal subgroups)
4. G is NOT abstractly simple (has a proper normal subgroup, though not closed)
-/
theorem kourovka_19_73 :
    ∃ (G : Type*) (_ : Group G) (_ : TopologicalSpace G) (_ : IsTopologicalGroup G),
      LocallyCompactSpace G ∧
      IsCompactlyGenerated G ∧
      IsTopologicallySimple G ∧
      ¬IsSimpleGroup G := by
  sorry
