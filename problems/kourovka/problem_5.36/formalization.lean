/-
Kourovka Notebook Problem 5.36 (A. Yu. Ol'shanskiĭ)

Does the free group of rank 2 have an infinite ascending chain of verbal subgroups
each being generated as a verbal subgroup by a single element?

A **verbal subgroup** of a group G generated by a word w ∈ F(X) (the free group on
countably many generators) is the subgroup of G generated by all values obtained
by substituting elements of G for the variables in w.

The question asks whether there exists an infinite strictly ascending chain
V(w₁) ⊊ V(w₂) ⊊ V(w₃) ⊊ ...
of verbal subgroups of F₂ (the free group on 2 generators), where each V(wᵢ)
is generated as a verbal subgroup by a single word wᵢ.
-/

import Mathlib.GroupTheory.FreeGroup.Basic

open FreeGroup

/--
The free group of rank 2, represented as FreeGroup on a 2-element type (Bool).
-/
abbrev F₂ : Type := FreeGroup Bool

/--
A word in a free group on countably many variables.
We use ℕ as the set of variables, giving us countably many.
-/
abbrev Word := FreeGroup ℕ

/--
Evaluate a word by substituting group elements for variables.
Given a word w ∈ FreeGroup ℕ and a substitution σ : ℕ → G,
this computes the value of w in G.
-/
noncomputable def evalWord {G : Type*} [Group G] (w : Word) (σ : ℕ → G) : G :=
  FreeGroup.lift σ w

/--
The set of all values of a word w in a group G, under all possible substitutions.
This is { w(g₁, g₂, ...) | gᵢ ∈ G }.
-/
def wordValues (G : Type*) [Group G] (w : Word) : Set G :=
  { g : G | ∃ σ : ℕ → G, evalWord w σ = g }

/--
The **verbal subgroup** of G generated by a single word w.
This is the subgroup generated by all values of w under all substitutions.
-/
def verbalSubgroup (G : Type*) [Group G] (w : Word) : Subgroup G :=
  Subgroup.closure (wordValues G w)

/--
Predicate for a strictly ascending (infinite) chain of subgroups indexed by ℕ.
-/
def IsStrictlyAscendingChain {G : Type*} [Group G] (chain : ℕ → Subgroup G) : Prop :=
  ∀ n : ℕ, chain n < chain (n + 1)

/--
**Kourovka Problem 5.36** (A. Yu. Ol'shanskiĭ):

Does the free group of rank 2 have an infinite ascending chain of verbal subgroups,
each being generated as a verbal subgroup by a single element (word)?

The statement asks for the existence of:
- A sequence of words w₀, w₁, w₂, ...
- Such that the verbal subgroups V(wᵢ) form a strictly ascending chain in F₂

This formalization states the existence of such a chain.
The conjecture is that such a chain exists (or doesn't exist - it's an open question).
-/
theorem kourovka_5_36 :
    ∃ (words : ℕ → Word),
      IsStrictlyAscendingChain (fun n => verbalSubgroup F₂ (words n)) := by
  sorry

/--
Alternative formulation: Nonexistence of such a chain.
If the answer to the problem is "no", then this statement would be provable.
-/
theorem kourovka_5_36_negative :
    ¬∃ (words : ℕ → Word),
      IsStrictlyAscendingChain (fun n => verbalSubgroup F₂ (words n)) := by
  sorry

/--
The question as stated: it is currently unknown whether such a chain exists.
This captures the open nature of the problem.
-/
def kourovka_5_36_question : Prop :=
  ∃ (words : ℕ → Word),
    IsStrictlyAscendingChain (fun n => verbalSubgroup F₂ (words n))
